Bridge.assembly("Elektronova konfigurace",function(){"use strict";Bridge.define("Elektronova_konfigurace.App",{statics:{editCanvas:function(electrons){var canvas=Bridge.cast(document.getElementById("canvas"),HTMLCanvasElement),ctx=canvas.getContext("2d"),xBodu,yBodu,r,i,stupen,rozdil,j;for(ctx.clearRect(0,0,canvas.width,canvas.height),xBodu=Bridge.Int.div(canvas.width,100)|0,yBodu=Bridge.Int.div(canvas.height,100)|0,ctx.beginPath(),ctx.fillStyle="red",ctx.fillRect((Bridge.Int.div(canvas.width,2)|0)-(Bridge.Int.div(xBodu,2)|0)|0,(Bridge.Int.div(canvas.height,2)|0)-(Bridge.Int.div(xBodu,2)|0)|0,xBodu,yBodu),ctx.fillStyle="black",ctx.stroke(),ctx.closePath(),r=0,i=0;i<electrons.length;i=i+1|0){for(r=r+(Bridge.Int.div(Bridge.Int.div(canvas.height-((Bridge.Int.div(canvas.height,100)|0)*5|0)|0,2)|0,electrons.length)|0)|0,ctx.beginPath(),ctx.arc(Bridge.Int.div(canvas.width,2)|0,Bridge.Int.div(canvas.height,2)|0,r,0,360),ctx.stroke(),ctx.closePath(),stupen=new(System.Collections.Generic.List$1(System.Double)),stupen.add(0),rozdil=360/electrons[i],j=1;j<electrons[i];j=j+1|0)stupen.add(stupen.getItem(stupen.getCount()-1|0)+rozdil);Elektronova_konfigurace.App.posElectronsByDegree(canvas,ctx,stupen.toArray(),r,xBodu,yBodu)}},clearCanvas:function(){var canvas=Bridge.cast(document.getElementById("canvas"),HTMLCanvasElement),ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height)},posElectronsByDegree:function(canvas,ctx,degrees,r,xBodu,yBodu){for(var $t=Bridge.getEnumerator(degrees);$t.moveNext();){var i=$t.getCurrent(),radiany=i*Math.PI/180,x=Math.cos(radiany)*r+(Bridge.Int.div(canvas.width,2)|0),y=Math.sin(radiany)*r+(Bridge.Int.div(canvas.height,2)|0);ctx.beginPath();ctx.fillRect(Bridge.Int.clip32(x)-(Bridge.Int.div(xBodu,2)|0)|0,Bridge.Int.clip32(y)-(Bridge.Int.div(yBodu,2)|0)|0,xBodu,yBodu);ctx.stroke();ctx.closePath()}}},$main:function(){var input=Bridge.cast(document.getElementById("protonNumber"),HTMLInputElement),vysledek=Bridge.cast(document.getElementById("vysledek"),HTMLParagraphElement);vysledek.innerHTML="";input.oninput=function(){var i={v:0},c;System.Int32.tryParse(input.value,i)&&i.v>0?(i.v>17518&&(i.v=17518,input.value="17518"),c=new Elektronova_konfigurace.Config(i.v),vysledek.innerHTML=System.String.replaceAll(c.generate(),"\n","<br />"),Elektronova_konfigurace.App.editCanvas(c.electrons.toArray())):(vysledek.innerHTML="",Elektronova_konfigurace.App.clearCanvas())}}});Bridge.define("Elektronova_konfigurace.Config",{protonNumber:0,letterList:null,unsortedLetterList:null,log:null,electrons:null,elements:null,config:{init:function(){this.elements=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}},ctor:function(protonNumber){this.$initialize();this.protonNumber=protonNumber;this.letterList=new(System.Collections.Generic.List$1(System.Char));this.letterList.add(115);this.unsortedLetterList=new(System.Collections.Generic.List$1(System.Char));this.unsortedLetterList.add(115);this.log="Elektronová konfigurace po vrstvách:\n\n";this.electrons=new(System.Collections.Generic.List$1(System.Int32))},generate:function(){for(var $t,$t1,vrstva=1,exit,letter,maxEl,i,vrstvaKPridani,j,e;System.Linq.Enumerable.from(this.electrons).sum()<this.protonNumber;){for(exit=!1,this.electrons.add(0),this.log=System.String.concat(this.log,System.String.format("{0}",System.String.alignString(System.String.concat(vrstva.toString(),")"),-4))),$t=Bridge.getEnumerator(this.letterList);$t.moveNext();){for(letter=$t.getCurrent(),maxEl=2,maxEl=maxEl+(this.unsortedLetterList.indexOf(letter)*4|0)|0,(vrstva===6||vrstva===7)&&letter===this.letterList.getItem(1)&&(this.protonNumber-(System.Linq.Enumerable.from(this.electrons).sum()-System.Linq.Enumerable.from(this.electrons).last()|0)|0)<=17&&(this.electrons.setItem((vrstva+this.getLetterBonus(100)|0)-1|0,this.electrons.getItem((vrstva+this.getLetterBonus(100)|0)-1|0)+1|0),this.log=System.String.concat(this.log,System.String.format("{0}d{1} ",(vrstva+this.getLetterBonus(100)|0).toString(),this.getUpperIndexOfNumber(1))),maxEl=maxEl-1|0),i=0,i=0;i<maxEl;i=i+1|0){if(System.Linq.Enumerable.from(this.electrons).sum()>=this.protonNumber){exit=!0;break}vrstvaKPridani=(vrstva+this.getLetterBonus(letter)|0)-1|0;this.electrons.setItem(vrstvaKPridani,this.electrons.getItem(vrstvaKPridani)+1|0)}if(letter===100?(i===4||i===9)&&(i=i+1|0,this.electrons.setItem((vrstva+this.getLetterBonus(100)|0)-1|0,this.electrons.getItem((vrstva+this.getLetterBonus(100)|0)-1|0)+1|0),this.electrons.setItem(vrstva-1|0,this.electrons.getItem(vrstva-1|0)-1|0),this.log=System.String.replaceAll(this.log,System.String.format("{0}s²",vrstva.toString()),System.String.format("{0}s{1}",vrstva.toString(),this.getUpperIndexOfNumber(1)))):letter===102&&(i===6||i===13)&&(i=i+1|0,this.electrons.setItem((vrstva+this.getLetterBonus(102)|0)-1|0,this.electrons.getItem((vrstva+this.getLetterBonus(102)|0)-1|0)+1|0),System.String.contains(this.log,System.String.format("{0}d{1}",vrstva+this.getLetterBonus(100)|0,this.getUpperIndexOfNumber(1)))?(this.electrons.setItem((vrstva-1|0)+this.getLetterBonus(100)|0,this.electrons.getItem((vrstva-1|0)+this.getLetterBonus(100)|0)-1|0),this.log=System.String.replaceAll(this.log,System.String.format("{0}d{1} ",(vrstva+this.getLetterBonus(100)|0).toString(),this.getUpperIndexOfNumber(1)),"")):(this.log=System.String.replaceAll(this.log,System.String.format("{0}s²",vrstva.toString()),System.String.format("{0}s{1}",vrstva.toString(),this.getUpperIndexOfNumber(1))),this.electrons.setItem(vrstva-1|0,this.electrons.getItem(vrstva-1|0)-1|0))),exit){i!==0&&(this.log=System.String.concat(this.log,System.String.concat((vrstva+this.getLetterBonus(letter)|0).toString(),String.fromCharCode(letter),this.getUpperIndexOfNumber(i))));break}else i!==0&&(this.log=System.String.concat(this.log,System.String.concat((vrstva+this.getLetterBonus(letter)|0).toString(),String.fromCharCode(letter),this.getUpperIndexOfNumber(maxEl)," ")))}this.log=System.String.concat(this.log,"\n");vrstva=vrstva+1|0;this.addLetter(vrstva)}for(j=0,this.log=System.String.concat(this.log,"\n\n\nPočty elektronů v jednotlivých vrstvách:\n\n"),$t1=Bridge.getEnumerator(this.electrons);$t1.moveNext();)e=$t1.getCurrent(),this.log=System.String.concat(this.log,System.String.format("{0}{1}\n",System.String.alignString(System.String.concat((j+1|0).toString(),")"),-4),e)),j=j+1|0;return this.log},getUpperIndexOfNumber:function(number){var s="",nmbr=System.Linq.Enumerable.from(number.toString()).first();switch(nmbr){case 49:s=System.String.concat(s,"¹");break;case 50:s=System.String.concat(s,"²");break;case 51:s=System.String.concat(s,"³");break;case 52:s=System.String.concat(s,"⁴");break;case 53:s=System.String.concat(s,"⁵");break;case 54:s=System.String.concat(s,"⁶");break;case 55:s=System.String.concat(s,"⁷");break;case 56:s=System.String.concat(s,"⁸");break;case 57:s=System.String.concat(s,"⁹");break;case 48:s=System.String.concat(s,"⁰")}return number.toString().length>1&&(s=System.String.concat(s,this.getUpperIndexOfNumber(System.Int32.parse(number.toString().substr(1))))),s},addLetter:function(vrstva){this.letterList.contains(112)?this.letterList.contains(100)?this.letterList.contains(102)?vrstva>(5+((((this.letterList.getItem(1)+1|0)-102|0)==0?1:(this.letterList.getItem(1)+1|0)-102|0)*2|0)|0)&&(this.unsortedLetterList.add((this.letterList.getItem(1)+1|0)&65535),this.letterList.insert(1,(this.letterList.getItem(1)+1|0)&65535)):vrstva>5&&(this.letterList.insert(1,102),this.unsortedLetterList.add(102)):vrstva>3&&(this.letterList.insert(1,100),this.unsortedLetterList.add(100)):vrstva>1&&(this.letterList.add(112),this.unsortedLetterList.add(112))},getLetterBonus:function(letter){var bonus=0;return letter!==112&&letter!==115&&(bonus=letter===100?-1:letter===102?-2:-2-(letter-102|0)|0),bonus}})});